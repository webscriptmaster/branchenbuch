<?php
/*
 * Funktionen, welche Formatierungen fr Telefonnummern bereitstellen
 */

function get_vorwahl($number) {
	$vorwahlen = Array(201, 202, 203, 208, 209, 211, 212, 2129, 214, 221,
					228, 231, 234, 241, 251, 261, 271, 281, 291, 30, 3221,
					3222, 3301, 3302, 3303, 3304, 3306, 3307, 331, 3321,
					3322, 3327, 3328, 3329, 3331, 3332, 3334, 3335, 3337,
					3338, 3341, 3342, 3344, 3346, 335, 3361, 3362, 3364,
					3366, 3371, 3372, 3375, 3377, 3378, 3379, 3381, 3382,
					3385, 3386, 3391, 3394, 3395, 340, 341, 3421, 3423,
					3425, 3431, 3433, 3435, 3437, 3441, 3443, 3445, 3447,
					3448, 345, 3461, 3462, 3464, 3466, 3471, 3473, 3475,
					3476, 3491, 3493, 3494, 3496, 3501, 3504, 351, 3521, 
					3522, 3523, 3525, 3528, 3529, 3531, 3533, 3535, 3537,
					3541, 3542, 3544, 3546, 355, 3561, 3562, 3563, 3564, 
					3571, 3573, 3574, 3576, 3578, 3581, 3583, 3585, 3586,
					3588, 3591, 3592, 3594, 3596, 3601, 3603, 3605, 3606,
					361, 3621, 3622, 3623, 3624, 3628, 3629, 3631, 3632,
					3634, 3635, 3636, 3641, 3643, 3644, 3647, 365, 3661,
					3663, 3671, 3672, 3675, 3677, 3679, 3681, 3682, 3683,
					3685, 3686, 3691, 3693, 3695, 371, 3721, 3722, 3723,
					3724, 3725, 3726, 3727, 3731, 3733, 3735, 3737, 3741,
					3744, 3745, 375, 3761, 3762, 3763, 3764, 3765, 3771,
					3772, 3773, 3774, 381, 3821, 3831, 3834, 3836, 3838,
					3841, 3843, 3844, 3847, 385, 3860, 3861, 3863, 3865,
					3866, 3867, 3868, 3869, 3871, 3874, 3876, 3877, 3881,
					3883, 3886, 3901, 3902, 3904, 3907, 3909, 391, 3921,
					3923, 3925, 3928, 3931, 3933, 3935, 3937, 3941, 3943,
					3944, 3946, 3947, 3949, 395, 3961, 3962, 3963, 3964,
					3965, 3966, 3967, 3968, 3969, 3971, 3973, 3976, 3981,
					3984, 3987, 3991, 3994, 3996, 3998, 40, 421, 431, 441,
					451, 461, 471, 481, 491, 511, 521, 531, 541, 551, 561,
					571, 581, 591, 611, 621, 631, 641, 651, 661, 671, 681,
					69, 711, 721, 731, 741, 751, 761, 771, 781, 791, 811,
					821, 831, 841, 851, 861, 871, 881, 89, 906, 911, 921, 
					931, 941, 951, 961, 971, 981, 991);
					
	if($number[0]==='0') {
		$test = substr($number, 1, 4);
		if(in_array((integer)$test, $vorwahlen)) {
			return substr($number, 0, 5);
		} else {
			$test = substr($number, 1, 3);
			if(in_array((integer)$test, $vorwahlen)) {
				return substr($number, 0, 4);
			} else {
				$test = substr($number, 1, 2);
				if(in_array((integer)$test, $vorwahlen)) {
					return substr($number, 0, 3);
				} elseif($number[1]=='3') {
					return substr($number, 0, 6);
				} else {
					return substr($number, 0, 5);
				}
			}
		}
	} else {
		return false;
	}
}

?>